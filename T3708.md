# T3708 蒜头君的序列

### 题目描述

蒜头君今天出门，在地上捡到了一个序列 $a$。

秉承着拾金不昧的原则，蒜头君在原地等待序列 $a$ 的主人回来，并将序列还给了他。

但是蒜头君十分喜欢这个序列，在等待的过程中，蒜头君拿出一个初始序列，这个初始序列的长度与序列 $a$ 的长度相等，且每个数字都为 $0$。蒜头君可以对这个初始序列进行操作。对于第 $i$ 次操作：

*   可以选定初始序列中的任意位置，将其加上 $k^i$；（ $i$ 从 $0$ 开始）
*   什么也不做。

蒜头君记住了序列 $a$ 中的每个数字，现在蒜头君想将这个初始序列变为序列 $a$，你能告诉蒜头君，经过若干次操作后，初始序列能变成 $a$ 序列吗？

如果可以，则输出 `^_^`；否则输出 `QwQ`。

### 输入格式

第一行输入一个正整数 $T$，表示测试的组数。

接下来输入 $T$ 组数据。

对于每组数据：

第一行输入两个整数 $n,k$，分别表示序列长度和题面中的 $k$。

第二行输入 $n$ 个正整数 $a_i(1\leq i\leq n)$。


### 输出格式

输出共 $T$ 行：

第 $i$ 行表示第 $i$ 组数据的结果：如果可以达到 $a$ 序列，则输出 `^_^`；否则输出 `QwQ`。


### 数据范围

对于 $20\%$ 的数据， $1\leq n\leq 10$，且有 $k=2,0\leq a_i\leq 100$。

对于另外 $20\%$ 的数据， $1\leq n\leq 30$，且有 $2\leq k\leq 10,0\leq a_i\leq 2000$。

对于 $100\%$ 的数据， $1\leq n\leq 30,2\leq k\leq 100,0\leq a_i\leq 10^{16},1\leq T\leq 5 $。

### 样例输入

```
3
4 100
0 0 0 0
1 2
1
3 2
0 1 3
```

### 样例输出

```
^_^
^_^
QwQ
```

### 样例解释

对于第一组数据，序列 $a$ 已经等于初始序列了，此时不需要操作。

对于第二组数据，第 $0$ 次操作的时候加上 $2^0=1$ 即可。

对于第三组数据，初始序列无法达成 $a$ 序列。



<div style="page-break-after: always"></div>

### 题解
这是一道 $k$ 进制的题目。

对于 $x$ 的 $k$ 进制表示，第 $j$ 位的数字 $b_j$ 可能为 $0,1,...,k-1$。

$x$ 的 $k$ 进制转十进制： $b_0 \times k^0 + b_1 \times k^1 + b_2 \times k^2 + \cdots$

按照题目，第 $i$ 次操作可以对任意数添加 $k^i$，因为 $i$ 不同，所以对于所有数的 $k$ 进制表示中，对于第 $j$ 位，只能有一个数的 $b_j = 1$，同时还有满足 $b_j \leq 1$，否则将不能构成序列。

结论：将 $n$ 个数转换为 $k$ 进制数，计算出所有的 $b_j$，如果 $n$ 个数均满足 $b_j \leq 1$，且不存在大于等于两个数的 $b_j$ 同时等于 $1$，则此时可以构造出该序列。否则，不能构造出该序列。

所以我们可以统计 $n$ 个数中 $b_j$ 的和，如果存在 $b_j$ 的和 $>1$，则不能构成该序列，否则可以。

#### 参考代码

```c++
#include <bits/stdc++.h>
using namespace std;
#define ll long long
const int maxn = 35;
const int maxm = 100;
int n, k;
ll a[maxn];
int cnt[maxm];
bool solve() {
    memset(cnt, 0, sizeof(cnt));
    for (int i = 1; i <= n; i++) {
        int j = 0;
        while (a[i]) {
            cnt[j] += a[i] % k;
            if (cnt[j] > 1) {
                return false;
            }
            a[i] /= k;
            j++;
        }
    }
    return true;
}
int main() {
    int T;
    cin >> T;
    while (T--) {
        cin >> n >> k;
        for (int i = 1; i <= n; i++) {
            cin >> a[i];
        }
        if (solve()) {
            cout << "^_^" << endl;
        } else {
            cout << "QwQ" << endl;
        }
    }
    return 0;
}


```

<div style="page-break-after: always"></div>
